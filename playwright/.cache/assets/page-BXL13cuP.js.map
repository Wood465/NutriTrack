{"version":3,"file":"page-BXL13cuP.js","sources":["../../../tests/components/mocks/next-auth-react.ts","../../../app/login/page.tsx"],"sourcesContent":["const getStore = () => {\r\n  const store = globalThis as unknown as {\r\n    __signInCalls?: number;\r\n  };\r\n  if (typeof store.__signInCalls !== 'number') {\r\n    store.__signInCalls = 0;\r\n  }\r\n  return store;\r\n};\r\n\r\nexport const signIn = () => {\r\n  const store = getStore();\r\n  store.__signInCalls = (store.__signInCalls ?? 0) + 1;\r\n  return Promise.resolve();\r\n};\r\n\r\nexport const __getSignInCalls = () => getStore().__signInCalls ?? 0;\r\n\r\nexport const __resetSignInCalls = () => {\r\n  getStore().__signInCalls = 0;\r\n};\r\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Navbar from \"@/app/ui/navbar\";\r\nimport { signIn } from \"next-auth/react\";\r\n\r\n/**\r\n * LOGIN PAGE (Prijava)\r\n *\r\n * Namen strani:\r\n * - Uporabniku omogoca prijavo na 2 nacina:\r\n *   1) Prijava z e-posto + geslom (klic na /api/login)\r\n *   2) Prijava z Googlom (NextAuth: signIn(\"google\"))\r\n *\r\n * Kako deluje:\r\n * - Uporabnik vnese email in geslo -> klikne \"Prijava\"\r\n * - Posljemo POST zahtevek na /api/login\r\n * - Ce je napaka -> prikazemo sporocilo (error)\r\n * - Ce je vse OK -> preusmerimo uporabnika na domov (\"/\")\r\n */\r\n\r\nexport default function LoginPage() {\r\n  // Controlled input fields: vrednost inputa je vezana na state\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  // error: uporabniku prikazemo napako iz backend-a ali \"fallback\" napako\r\n  const [error, setError] = useState(\"\");\r\n\r\n  /**\r\n   * Prijava z e-posto in geslom\r\n   * - POST /api/login z { email, password }\r\n   * - Backend vrne res.ok ali error message\r\n   */\r\n  async function handleLogin() {\r\n    // Pred vsakim poskusom pocistimo napako, da se ne prikazuje stara\r\n    setError(\"\");\r\n\r\n    const res = await fetch(\"/api/login\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ email, password }),\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    // Ce backend vrne napako, jo prikazemo uporabniku\r\n    if (!res.ok) {\r\n      setError(data.error || \"Nepricakovana napaka\");\r\n      return;\r\n    }\r\n\r\n    // Uspeh: po prijavi preusmerimo na domov (uporabnik vidi svoj dashboard)\r\n    window.location.href = \"/\";\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen\">\r\n      {/* Navigacija na vrhu strani */}\r\n      <Navbar />\r\n\r\n      <div className=\"mx-auto max-w-6xl px-4 pb-16 pt-10 md:px-6\">\r\n        <section className=\"grid gap-6 lg:grid-cols-[1.1fr_0.9fr]\">\r\n          {/* Leva stran: vizualni \"hero\" z opisom */}\r\n          <div className=\"rounded-3xl border border-blue-200/50 bg-gradient-to-br from-blue-600 via-blue-500 to-sky-500 p-8 text-white shadow-lg md:p-12\">\r\n            <div className=\"max-w-md space-y-3\">\r\n              <p className=\"text-sm font-semibold uppercase tracking-wide text-blue-100\">\r\n                Dobrodosli nazaj\r\n              </p>\r\n              <h1 className=\"text-3xl font-semibold md:text-4xl\">Prijava</h1>\r\n              <p className=\"text-base text-blue-100 md:text-lg\">\r\n                Dostopi do svojih obrokov, statistike in ciljev v eni prijavi.\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Desna stran: obrazec za prijavo */}\r\n          <div className=\"rounded-3xl border border-gray-200/70 bg-white/95 p-6 shadow-sm backdrop-blur dark:border-gray-800/70 dark:bg-gray-900/80 md:p-8\">\r\n            <h2 className=\"text-xl font-semibold text-gray-900 dark:text-gray-100\">\r\n              Prijavi se v racun\r\n            </h2>\r\n            <p className=\"mt-1 text-sm text-gray-600 dark:text-gray-300\">\r\n              Vnesi e-posto in geslo ter nadaljuj.\r\n            </p>\r\n\r\n            {/* Napaka se prikaze samo, ce imamo error string */}\r\n            {error && (\r\n              <div className=\"mt-4 rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200\">\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            {/* Form je tu zaradi strukture, submit prepreƒçimo, ker klik obdelamo rocno */}\r\n            <form\r\n              className=\"mt-6 space-y-4\"\r\n              onSubmit={(e) => e.preventDefault()}\r\n            >\r\n              {/* Email input */}\r\n              <div>\r\n                <label\r\n                  htmlFor=\"login-email\"\r\n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-200\"\r\n                >\r\n                  E-posta\r\n                </label>\r\n                <input\r\n                  id=\"login-email\"\r\n                  type=\"email\"\r\n                  placeholder=\"vnesi e-posto\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  className=\"mt-2 w-full rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-gray-700 dark:bg-gray-950 dark:text-gray-100 dark:focus:border-blue-500 dark:focus:ring-blue-900\"\r\n                />\r\n              </div>\r\n\r\n              {/* Password input */}\r\n              <div>\r\n                <label\r\n                  htmlFor=\"login-password\"\r\n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-200\"\r\n                >\r\n                  Geslo\r\n                </label>\r\n                <input\r\n                  id=\"login-password\"\r\n                  type=\"password\"\r\n                  placeholder=\"vnesi geslo\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  className=\"mt-2 w-full rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-gray-700 dark:bg-gray-950 dark:text-gray-100 dark:focus:border-blue-500 dark:focus:ring-blue-900\"\r\n                />\r\n              </div>\r\n\r\n              {/* Gumb za email/geslo prijavo */}\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleLogin}\r\n                className=\"w-full rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-blue-700\"\r\n              >\r\n                Prijava\r\n              </button>\r\n            </form>\r\n\r\n            {/* Alternativa: Google sign-in + link do registracije */}\r\n            <div className=\"mt-6 space-y-3\">\r\n              <div className=\"flex items-center gap-3 text-xs uppercase tracking-wide text-gray-400\">\r\n                <span className=\"h-px flex-1 bg-gray-200 dark:bg-gray-800\" />\r\n                ali\r\n                <span className=\"h-px flex-1 bg-gray-200 dark:bg-gray-800\" />\r\n              </div>\r\n\r\n              {/* Google prijava preko NextAuth */}\r\n              <button\r\n                onClick={() => signIn(\"google\", { callbackUrl: \"/\" })}\r\n                className=\"w-full rounded-xl border border-gray-200 bg-white px-4 py-2 text-sm font-semibold text-gray-700 transition hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-950 dark:text-gray-200 dark:hover:bg-gray-900\"\r\n              >\r\n                Prijava z Googlom\r\n              </button>\r\n\r\n              <p className=\"text-center text-sm text-gray-500 dark:text-gray-400\">\r\n                Nimas racuna?{\" \"}\r\n                <Link\r\n                  href=\"/register\"\r\n                  className=\"font-semibold text-blue-600 transition hover:text-blue-500 dark:text-blue-300 dark:hover:text-blue-200\"\r\n                >\r\n                  Registracija\r\n                </Link>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":["useState","jsxs","jsx"],"mappings":"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"}